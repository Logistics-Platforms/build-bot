name: Build
description: "Builds the application for the specified platform"
inputs:
  platform:
    description: "Platform to build (ios or android)"
    required: true
  node-version:
    description: "Node.js version to use"
    required: false
    default: "18"
  cache-hit:
    description: "Whether cache was hit in previous job"
    required: false
    default: "false"

runs:
  using: "composite"
  steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: ${{ inputs.node-version }}

    # - name: Restore cache
    #   if: inputs.cache-hit == 'true'
    #   uses: actions/cache@v3
    #   with:
    #     path: |
    #       node_modules
    #       ~/.npm
    #     key: ${{ runner.os }}-cache-${{ hashFiles('**/package-lock.json') }}
    #     restore-keys: |
    #       ${{ runner.os }}-cache-

    # - name: Install dependencies
    #   if: inputs.cache-hit != 'true'
    #   shell: bash
    #   run: npm ci

    - name: Build ${{ inputs.platform }}
      shell: bash
      run: |
        echo "Building ${{ inputs.platform }} application..."
        # Add your build commands here
        # npm run build:${{ inputs.platform }}

    # - name: Upload ${{ inputs.platform }} artifact
    #   uses: actions/upload-artifact@v4
    #   with:
    #     name: ${{ inputs.platform }}-build
    #     path: |
    #       build/${{ inputs.platform }}
    #       # Adjust path to your build output
